{"version":3,"sources":["assets/close-icon-small.png","app/components/FileUpload.js"],"names":["module","exports","FileUpload","props","state","hide","fileUploadChange","bind","e","previewid","fileApi","files","target","filename","name","reader","FileReader","readerBase64","readAsArrayBuffer","readAsDataURL","this","setState","onloadend","base64","result","document","getElementById","src","onload","fileobject","image_data","file_name","split","join","Date","now","fileupload","then","response","data","fid","value","onChange","targetField","alert","JSON","stringify","onSubmit","onFormSubmit","className","alt","id","CloseIcon","multiple","type","prevProps","image","console","log","Component"],"mappings":"8FAAAA,EAAOC,QAAU,84C,8KCIIC,E,YACnB,WAAYC,GAAQ,IAAD,8BACjB,4CAAMA,KACDC,MAAQ,CACXC,MAAM,GAGR,EAAKC,iBAAmB,EAAKA,iBAAiBC,KAAtB,gBANP,E,8EASFC,EAAGC,EAAWC,GAAU,IAAD,OAClCC,EAAQH,EAAEI,OAAOD,MACjBE,EAAWF,EAAM,GAAGG,KAEpBC,EAAS,IAAIC,WACbC,EAAe,IAAID,WAEvBD,EAAOG,kBAAkBP,EAAM,IAE/BM,EAAaE,cAAcR,EAAM,IACjCS,KAAKC,SAAS,CACZhB,MAAM,IAERY,EAAaK,UAAY,SAASd,GAChC,IAAIe,EAASf,EAAEI,OAAOY,OACtBC,SAASC,eAAe,WAAajB,GAAWkB,IAAMJ,GAGxDR,EAAOa,OAAS,SAAApB,GACd,IAEIqB,EAAa,CACfC,WAHatB,EAAEI,OAAOY,OAItBO,UAAWlB,EAASmB,MAAM,KAAKC,KAAK,IAAMC,KAAKC,MAAQ,MAEzDC,YAAWP,EAAYnB,GAAS2B,MAAK,SAAAC,GAC/BA,EAASC,KAAKC,IAAI,GAAGC,MACvB,EAAKtC,MAAMuC,SACT,EAAKvC,MAAMwC,YACXL,EAASC,KAAKC,IAAI,GAAGC,OAGvBG,MAAMC,KAAKC,UAAUR,EAASC,a,+BAM5B,IAAD,OACP,OACE,yBAAKQ,SAAU3B,KAAK4B,cAClB,yBAAKC,UAAW7B,KAAKhB,MAAMC,KAAO,QAAU,IAC1C,yBACE4C,UAAU,iBACVtB,IAAI,GACJuB,IAAI,UACJC,GAAE,kBAAa/B,KAAKjB,MAAMwC,eAE5B,yBAAKM,UAAU,aAAatB,IAAKyB,IAAWF,IAAI,UAElD,yBAAKD,UAAU,aACf,2BACEI,UAAQ,EACRJ,UAAU,OACVK,KAAK,OACLxC,KAAK,OACL4B,SAAU,SAAAlC,GAAC,OACT,EAAKF,iBAAiBE,EAAG,EAAKL,MAAMwC,YAAa,EAAKxC,MAAMO,e,yCAgBnD6C,GACjB,GAAInC,KAAKjB,MAAMqD,QAAUD,EAAUC,MAAO,CAAC,IAAD,EACXpC,KAAKjB,MAA5BqD,EADkC,EAClCA,MAAOb,EAD2B,EAC3BA,YACbc,QAAQC,IAAIf,GACZc,QAAQC,IAAIF,GACE,KAAVA,IACF/B,SAASC,eAAe,WAAaiB,GAAahB,IAAM6B,EACxDpC,KAAKC,SAAS,CACZhB,MAAM,U,GA3FwBsD","file":"static/js/22.231275f0.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzhGMjZCQzJGNjI5MTFFNjhEOThCMDU2QTI0RUU5NjEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzhGMjZCQzNGNjI5MTFFNjhEOThCMDU2QTI0RUU5NjEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDOEYyNkJDMEY2MjkxMUU2OEQ5OEIwNTZBMjRFRTk2MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDOEYyNkJDMUY2MjkxMUU2OEQ5OEIwNTZBMjRFRTk2MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Po8nCv0AAACLSURBVHjaYvz//38KAwODFhAXMWAHfUB8jQGocPl/CGgCYgY03ASVWw7isAHxFqhACZKiUqjYVpAamCAXEO8D4n9AnAHF/6BiIDkGZGt4gfgEEP+FKjoBFQPLMyE5mhGJ/R9DDIvV6bisxuWZEnTPwIKnEV/wsABt3wvEz4G4Hktg1wExDyjAAQIMAKOK+M3/IhZ/AAAAAElFTkSuQmCC\"","import React, { Component } from \"react\";\nimport { fileupload } from \"../Networks\";\nimport CloseIcon from \"../../assets/close-icon-small.png\";\n\nexport default class FileUpload extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hide: true\n    };\n\n    this.fileUploadChange = this.fileUploadChange.bind(this);\n  }\n\n  fileUploadChange(e, previewid, fileApi) {\n    let files = e.target.files;\n    let filename = files[0].name;\n\n    let reader = new FileReader();\n    var readerBase64 = new FileReader();\n\n    reader.readAsArrayBuffer(files[0]);\n\n    readerBase64.readAsDataURL(files[0]);\n    this.setState({\n      hide: false\n    });\n    readerBase64.onloadend = function(e) {\n      var base64 = e.target.result;\n      document.getElementById(\"preview_\" + previewid).src = base64;\n    };\n\n    reader.onload = e => {\n      var strImage = e.target.result;\n\n      let fileobject = {\n        image_data: strImage,\n        file_name: filename.split(\".\").join(\"-\" + Date.now() + \".\")\n      };\n      fileupload(fileobject, fileApi).then(response => {\n        if (response.data.fid[0].value) {\n          this.props.onChange(\n            this.props.targetField,\n            response.data.fid[0].value\n          );\n        } else {\n          alert(JSON.stringify(response.data));\n        }\n      });\n    };\n  }\n\n  render() {\n    return (\n      <div onSubmit={this.onFormSubmit}>\n        <div className={this.state.hide ? \"ahide\" : \"\"}>\n          <img\n            className=\"upload_preview\"\n            src=\"\"\n            alt=\"preview\"\n            id={`preview_${this.props.targetField}`}\n          />\n          <img className=\"icon-class\" src={CloseIcon} alt=\"icon\" />\n        </div>\n        <div className=\"clearfix\"></div>\n        <input\n          multiple\n          className=\"file\"\n          type=\"file\"\n          name=\"file\"\n          onChange={e =>\n            this.fileUploadChange(e, this.props.targetField, this.props.fileApi)\n          }\n        />\n      </div>\n    );\n  }\n\n  // componentDidMount() {\n  //   let { avatar, targetField } = this.props;\n  //   console.log(targetField);\n  //   console.log(avatar);\n  //   if (avatar !== \"\") {\n  //     document.getElementById(\"preview_\" + targetField).src = avatar;\n  //   }\n  // }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.image !== prevProps.image) {\n      let { image, targetField } = this.props;\n      console.log(targetField);\n      console.log(image);\n      if (image !== \"\") {\n        document.getElementById(\"preview_\" + targetField).src = image;\n        this.setState({\n          hide: false\n        });\n      }\n    }\n  }\n}\n"],"sourceRoot":""}