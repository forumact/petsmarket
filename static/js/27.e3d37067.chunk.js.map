{"version":3,"sources":["app/Forms/LoginForm.js","app/containers/Login.js"],"names":["LoginForm","props","validator","FormValidator","LoginFormValidation","state","username","password","validation","valid","handleInputChange","bind","handleSubmit","responseGoogle","submitted","event","target","name","value","formv","this","setState","preventDefault","validate","isValid","payload","pass","login","then","response","data","invalid","document","getElementById","innerHTML","userdetails","csrf","csrf_token","uid","avatar","user","localStorage","setItem","JSON","stringify","history","push","e","console","log","loginCheckandCreate","status","className","onSubmit","id","autoComplete","htmlFor","type","placeholder","onChange","message","to","appId","autoLoad","fields","callback","responseFacebook","cssClass","clientId","googleClientID","buttonText","onSuccess","onFailure","Component","withRouter","Login","userobject","React"],"mappings":"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","file":"static/js/27.e3d37067.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { LoginFormValidation, googleClientID } from \"../const\";\nimport { login, loginCheckandCreate } from \"../../app/Networks\";\nimport FacebookLogin from \"react-facebook-login\";\nimport GoogleLogin from \"react-google-login\";\nimport { withRouter } from \"react-router-dom\";\n\nimport FormValidator from \"../FormValidator\";\n\nclass LoginForm extends Component {\n  constructor(props) {\n    super(props);\n\n    this.validator = new FormValidator(LoginFormValidation);\n\n    this.state = {\n      username: \"\",\n      password: \"\",\n      validation: this.validator.valid()\n    };\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.responseGoogle = this.responseGoogle.bind(this);\n\n    this.submitted = false;\n  }\n\n  handleInputChange(event) {\n    const { name, value } = event.target;\n    let formv = {\n      [name]: value\n    };\n    this.setState(formv);\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n\n    const validation = this.validator.validate(this.state);\n    this.setState({ validation });\n    this.submitted = true;\n\n    if (validation.isValid) {\n      try {\n        const payload = {\n          name: this.state.username,\n          pass: this.state.password\n        };\n        login(payload).then(response => {\n          if (response.data.invalid) {\n            document.getElementById(\"error\").innerHTML = response.data.invalid;\n            return false;\n          }\n          const userdetails = {\n            csrf: response.data.csrf_token,\n            uid: response.data.uid,\n            avatar: response.data.avatar\n          };\n          this.setState({ user: userdetails });\n          localStorage.setItem(\"userObject\", JSON.stringify(response.data));\n          this.props.history.push(\"/\");\n        });\n      } catch (e) {\n        console.log(`Axios request failed: ${e}`);\n      }\n    }\n  }\n\n  responseGoogle(response) {\n    loginCheckandCreate(response).then(response => {\n      console.log(response.data);\n      if (response.data.status === 1) {\n        console.log(\"user logged in\");\n        const userdetails = {\n          csrf: response.data.csrf_token,\n          uid: response.data.uid,\n          avatar: response.data.avatar\n        };\n        this.setState({ user: userdetails });\n        localStorage.setItem(\"userObject\", JSON.stringify(response.data));\n        this.props.history.push(\"/\");\n      }\n    });\n  }\n\n  responseFacebook() {}\n\n  render() {\n    let validation = this.submitted\n      ? this.validator.validate(this.state)\n      : this.state.validation;\n\n    return (\n      <div className=\"form-popup\">\n        <div className=\"form-popup-headline secondary\">\n          <h2>Login to your Account</h2>\n          <p>Enter now to your account and start buying and selling!</p>\n        </div>\n        <div className=\"form-popup-content\">\n          <form onSubmit={this.handleSubmit} id=\"login-form\" autoComplete=\"off\">\n            <div className=\"input-container\">\n              <label htmlFor=\"username\" className=\"rl-label\">\n                Username\n              </label>\n              <input\n                name=\"username\"\n                type=\"text\"\n                placeholder=\"Enter your username here...\"\n                value={this.state.username}\n                onChange={this.handleInputChange}\n              />\n              <span className=\"form-error\">{validation.username.message}</span>\n            </div>\n            <div className=\"input-container\">\n              <label htmlFor=\"password\" className=\"rl-label\">\n                Password\n              </label>\n              <input\n                name=\"password\"\n                type=\"password\"\n                placeholder=\"Enter your password here...\"\n                value={this.state.password}\n                onChange={this.handleInputChange}\n              />\n              <span className=\"form-error\">{validation.password.message}</span>\n            </div>\n            <input name=\"remember\" id=\"remember\" type=\"checkbox\" />\n            <label htmlFor=\"remember\" className=\"label-check\">\n              <span className=\"checkbox primary primary\">\n                <span></span>\n              </span>\n              Remember username and password\n            </label>\n            <p>\n              {\" \"}\n              Back to home?{\" \"}\n              <Link to={`/`} className={\"primary\"}>\n                Home\n              </Link>\n            </p>\n            &nbsp;\n            <p>\n              {\" \"}\n              New to Pigeons World?{\" \"}\n              <Link to={`/user-register`} className={\"primary\"}>\n                Sign up now\n              </Link>\n            </p>\n            <button type=\"submit\" className=\"button mid dark\">\n              Login <span className=\"primary\">Now!</span>\n            </button>\n            <span id=\"error\" className=\"form-error\"></span>\n          </form>\n          <hr className=\"line-separator double\" />\n\n          <FacebookLogin\n            appId=\"Your FacebookAPP ID\"\n            autoLoad={false}\n            fields=\"name,email,picture\"\n            callback={this.responseFacebook}\n            cssClass=\"button mid fb half mt-0\"\n          />\n\n          <GoogleLogin\n            clientId={googleClientID}\n            buttonText=\"Login with Google\"\n            onSuccess={this.responseGoogle}\n            onFailure={this.responseGoogle}\n            className=\"button mid tertiary half gchanges mt-0\"\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(LoginForm);\n","import React from \"react\";\nimport LoginForm from \"../Forms/LoginForm\";\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      userobject: \"\"\n    };\n  }\n  render() {\n    return (\n      <div className=\"section-wrap\">\n        <div className=\"section\">\n          <LoginForm />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Login;\n"],"sourceRoot":""}